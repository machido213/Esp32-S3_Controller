<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="640" viewBox="0 0 1000 640">
  <style>
    .bg { fill:#0f2b21; }
    .pin { fill:#ffffff; stroke:#000; stroke-width:0.6 }
    .label { font-family: Arial, Helvetica, sans-serif; font-size:12px; fill:#ffffff }
    .title { font-size:16px; font-weight:700 }
    .section { font-size:13px; font-weight:600; fill:#cfeadf }
    .adc { fill:#4da6ff }
    .relay { fill:#ff6b6b }
    .uart { fill:#ffa94d }
  </style>

  <rect x="24" y="28" width="952" height="584" rx="12" fill="#082016" />
  <text x="500" y="56" text-anchor="middle" class="label title">ESP32-S3 接線示意圖（與 main/io_config.h 對應）</text>

  <!-- Left column -->
  <text x="60" y="100" class="section">左側：電源端 / OTA</text>
  <g transform="translate(60,120)">
    <text x="0" y="0" class="label">Z1 (OTA 按鈕) — `Z1_GPIO` = GPIO 0 (板上 BOOT)</text>
    <text x="0" y="24" class="label">A1_1 — `A1_1_GPIO` = GPIO 4</text>
    <text x="0" y="48" class="label">A1_2 — `A1_2_GPIO` = GPIO 5</text>
    <text x="0" y="80" class="label">A2 (LED) — `A2_GPIO` = GPIO 6 (繼電器/LED 驅動)</text>
    <text x="0" y="104" class="label">A3 (LED) — `A3_GPIO` = GPIO 7 (繼電器/LED 驅動)</text>
    <text x="0" y="128" class="label">A4 (LED) — `A4_GPIO` = GPIO 15 (繼電器/LED 驅動)</text>
  </g>

  <!-- Center column -->
  <text x="360" y="100" class="section">中間：選擇端 (B 系列)</text>
  <g transform="translate(360,120)">
    <text x="0" y="0" class="label">B1_1 — `B1_1_GPIO` = GPIO 16</text>
    <text x="0" y="24" class="label">B1_2 — `B1_2_GPIO` = GPIO 17</text>
    <text x="0" y="56" class="label">B2 (電位器) — `B2_GPIO` = GPIO 1  (ADC_CHANNEL_0)</text>
    <text x="0" y="80" class="label">B3 (電位器) — `B3_GPIO` = GPIO 2  (ADC_CHANNEL_1)</text>
    <text x="0" y="112" class="label">B4 (切換) — `B4_GPIO` = GPIO 8</text>
    <text x="0" y="136" class="label">B5 (點動) — `B5_GPIO` = GPIO 9</text>
    <text x="0" y="160" class="label">B6 (蜂鳴器) — `B6_GPIO` = GPIO 10 (驅動或繼電器)</text>
  </g>

  <!-- Right column -->
  <text x="660" y="100" class="section">右側：搖桿 (C 系列) + UART</text>
  <g transform="translate(660,120)">
    <text x="0" y="0" class="label">C1_1..C1_4 — GPIO 11,12,13,14</text>
    <text x="0" y="24" class="label">C2_1..C2_4 — GPIO 38,39,40,41</text>
    <text x="0" y="48" class="label">C3_1..C3_4 — GPIO 42,21,35,36</text>
    <text x="0" y="72" class="label">C4_1..C4_2 — GPIO 37,45 (注意：GPIO45 為 strap pin)</text>
    <text x="0" y="112" class="label">UART → Jetson: TX=`JETSON_UART_TX_PIN` = GPIO 46, RX=`JETSON_UART_RX_PIN` = GPIO 47 (UART_NUM_1)</text>
  </g>

  <!-- Legend and notes -->
  <g transform="translate(60,420)">
    <rect x="0" y="0" width="880" height="160" rx="8" fill="#0b3b2e" stroke="#0b5a43" />
    <text x="12" y="22" class="label" style="font-weight:700">接線注意事項</text>
    <text x="12" y="46" class="label">- B2/B3 為 ADC 輸入 (ADC_CHANNEL_0 / ADC_CHANNEL_1)，程式以 `esp_adc/adc_oneshot` 讀取。</text>
    <text x="12" y="66" class="label">- 輸出驅動高電壓 (220V) 請用繼電器或驅動板隔離 MCU。</text>
    <text x="12" y="86" class="label">- 若改動 `main/io_config.h`，請以該檔為最終準則並同步 README/SVG。</text>
    <text x="12" y="106" class="label">- `C3_3_GPIO` (GPIO 35) 在某些板型或 PSRAM 配置可能不可用，接線前請確認模組腳位。</text>
    <text x="12" y="126" class="label">- `C4_2_GPIO` = GPIO 45 為 strap pin，開機時請避免拉低。</text>
  </g>

  <text x="44" y="612" class="label" style="font-size:11px;fill:#9fd9b8">說明：此 SVG 為示意性標註圖，實際接線請以 `main/io_config.h` 與開發板資料表為準。</text>
</svg>
<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="640" viewBox="0 0 1000 640">
  <style>
    .board { fill:#0f2b21; stroke:#022b22; stroke-width:3 }
    .pin { fill:#ffffff; stroke:#000000; stroke-width:0.8 }
    .label { font-family: Arial, Helvetica, sans-serif; font-size:12px; fill:#ffffff }
    .title { font-size:16px; font-weight:700 }
    .legend-box { fill:#ffffff; stroke:#e6e6e6 }
    .gline { stroke-width:2 }
    .gpio-line { stroke:#8fd19e } /* green = GPIO signal */
    .adc-line { stroke:#4da6ff }  /* blue = ADC/pot */
    .relay-line { stroke:#ff6b6b }/* red = relay/high-voltage control */
    .uart-line { stroke:#ffa94d } /* orange = UART */
  </style>

  <!-- Board rectangle -->
  <rect x="40" y="40" width="620" height="540" rx="14" class="board" />
  <text x="360" y="68" text-anchor="middle" class="label title">ESP32-S3 範例接線圖（示意）</text>

  <!-- Left pins (control + LEDs) -->
  <g transform="translate(80,110)">
    <g>
      <circle class="pin" cx="0" cy="0" r="8" />
      <text x="28" y="5" class="label">Z1 (OTA 按鈕) — `Z1_GPIO` = GPIO 2</text>
    </g>
    <g transform="translate(0,50)">
      <circle class="pin" cx="0" cy="0" r="8" />
      <text x="28" y="5" class="label">A1_1 — `A1_1_GPIO` = GPIO 4</text>
    </g>
    <g transform="translate(0,100)">
      <circle class="pin" cx="0" cy="0" r="8" />
      <text x="28" y="5" class="label">A1_2 — `A1_2_GPIO` = GPIO 5</text>
    </g>
    <!-- LEDs driven via relays (示意) -->
    <g transform="translate(0,160)">
      <rect x="-10" y="-8" width="20" height="16" rx="3" class="pin" />
      <text x="28" y="5" class="label">A2 (LED) — `A2_GPIO` = GPIO 6 (relay)</text>
    </g>
    <g transform="translate(0,210)">
      <rect x="-10" y="-8" width="20" height="16" rx="3" class="pin" />
      <text x="28" y="5" class="label">A3 (LED) — `A3_GPIO` = GPIO 7 (relay)</text>
    </g>
    <g transform="translate(0,260)">
      <rect x="-10" y="-8" width="20" height="16" rx="3" class="pin" />
      <text x="28" y="5" class="label">A4 (LED) — `A4_GPIO` = GPIO 8 (relay)</text>
    </g>
  </g>

  <!-- Center pins (selection & pots) -->
  <g transform="translate(360,110)">
    <g>
      <circle class="pin" cx="0" cy="0" r="8" />
      <text x="28" y="5" class="label">B1_1 — `B1_1_GPIO` = GPIO 9</text>
    </g>
    <g transform="translate(0,50)">
      <circle class="pin" cx="0" cy="0" r="8" />
      <text x="28" y="5" class="label">B1_2 — `B1_2_GPIO` = GPIO 10</text>
    </g>
    <g transform="translate(0,100)">
      <circle class="pin" cx="0" cy="0" r="8" />
      <text x="28" y="5" class="label">B2 (POT) — `B2_GPIO` = GPIO 11 — ADC_CHANNEL_0</text>
    </g>
    <g transform="translate(0,150)">
      <circle class="pin" cx="0" cy="0" r="8" />
      <text x="28" y="5" class="label">B3 (POT) — `B3_GPIO` = GPIO 12 — ADC_CHANNEL_1</text>
    </g>
    <g transform="translate(0,200)">
      <circle class="pin" cx="0" cy="0" r="8" />
      <text x="28" y="5" class="label">B4 (切換) — `B4_GPIO` = GPIO 13</text>
    </g>
    <g transform="translate(0,250)">
      <circle class="pin" cx="0" cy="0" r="8" />
      <text x="28" y="5" class="label">B5 (點動) — `B5_GPIO` = GPIO 14</text>
    </g>
    <g transform="translate(0,300)">
      <rect x="-8" y="-8" width="16" height="16" rx="3" class="pin" />
      <text x="28" y="5" class="label">B6 (蜂鳴器/繼電器) — `B6_GPIO` = GPIO 15</text>
    </g>
  </g>

  <!-- Right pins (joysticks) -->
  <g transform="translate(600,110)">
    <g>
      <rect x="-8" y="-8" width="16" height="16" rx="2" class="pin" />
      <text x="28" y="5" class="label">C1_1..4 — `C1_1_GPIO`.. = GPIO 16..19</text>
    </g>
    <g transform="translate(0,60)">
      <rect x="-8" y="-8" width="16" height="16" rx="2" class="pin" />
      <text x="28" y="5" class="label">C2_1..4 — GPIO 20..23</text>
    </g>
    <g transform="translate(0,120)">
      <rect x="-8" y="-8" width="16" height="16" rx="2" class="pin" />
      <text x="28" y="5" class="label">C3_1..4 — GPIO 25..28</text>
    </g>
    <g transform="translate(0,180)">
      <rect x="-8" y="-8" width="16" height="16" rx="2" class="pin" />
      <text x="28" y="5" class="label">C4_1..2 — GPIO 29..30</text>
    </g>
  </g>

  <!-- UART to Jetson (bottom) -->
  <g transform="translate(120,430)">
    <line x1="40" y1="16" x2="520" y2="16" class="gline uart-line" />
    <text x="280" y="-6" text-anchor="middle" class="label">UART → Jetson (示意)</text>
    <text x="0" y="34" class="label">`JETSON_UART_TX_GPIO` = GPIO 33 (ESP TX)</text>
    <text x="420" y="34" class="label">`JETSON_UART_RX_GPIO` = GPIO 34 (ESP RX)</text>
  </g>

  <!-- Relay / high voltage depiction (near LEDs & buzzer) -->
  <g transform="translate(220,170)">
    <!-- Relay symbol for A2 -->
    <rect x="-14" y="-6" width="28" height="12" rx="2" fill="#fff" stroke="#000" />
    <text x="0" y="28" class="label" text-anchor="middle" style="fill:#fff">繼電器 (示意)</text>
    <!-- AC power symbol -->
    <g transform="translate(100,0)">
      <circle cx="0" cy="0" r="14" fill="#fff" stroke="#000" />
      <text x="0" y="5" text-anchor="middle" style="font-size:10px;fill:#000">AC</text>
      <text x="0" y="22" text-anchor="middle" class="label">220V</text>
    </g>
  </g>

  <!-- Example colored lines from GPIO to relays / pots -->
  <!-- A2 control (relay) -->
  <line x1="112" y1="230" x2="220" y2="200" class="gline relay-line" />
  <text x="160" y="240" class="label">A2_GPIO → 繼電器線（紅）</text>

  <!-- B2/B3 ADC lines -->
  <line x1="392" y1="210" x2="520" y2="300" class="gline adc-line" />
  <text x="460" y="320" class="label">B2/B3→ADC（藍）</text>

  <!-- UART line -->
  <line x1="420" y1="460" x2="700" y2="460" class="gline uart-line" />

  <!-- Legend box -->
  <g transform="translate(680,100)">
    <rect x="0" y="0" width="300" height="220" rx="8" class="legend-box" />
    <text x="12" y="26" class="label title" style="fill:#111">圖例 / 注意事項</text>
    <text x="12" y="52" class="label" style="fill:#222">- 綠色：一般 GPIO 控制線（直接連 MCU）</text>
    <text x="12" y="72" class="label" style="fill:#222">- 藍色：ADC（電位器），請以 `B2/B3_ADC_CHANNEL` 對應</text>
    <text x="12" y="92" class="label" style="fill:#222">- 紅色：繼電器/高壓控制線（驅動繼電器，實際負載接 220V）</text>
    <text x="12" y="112" class="label" style="fill:#222">- 橙色：UART TX/RX</text>
    <text x="12" y="132" class="label" style="fill:#222">- 檔案： `docs/wiring.svg`（可修改並 commit）</text>
    <text x="12" y="162" class="label" style="fill:#222">- 程式內腳位定義：`main/io_config.h`</text>
  </g>

  <!-- Footer small -->
  <text x="44" y="612" class="label" style="font-size:11px;fill:#ccc">產生：由 Copilot 產生的 SVG 示意圖，請按實際接線與硬體手冊調整</text>
</svg>
